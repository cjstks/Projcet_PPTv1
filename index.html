<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.7, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes">
    <title>STP 발표</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header id="header">
    <h1-1>STP : PVST+ & RSTP, MSTP </h1-1>
</header>

<footer id="footer">
    <p>2025 알파시티클라우드보안</p>
</footer>

<!-- 1. 제목 -->
<section class="slide active">
    <h1>Spanning Tree Protocol (STP)</h1>
    <p>루프 없는 안정적인 네트워크를 위한 핵심 프로토콜</p>
    <h1-1>발표자: 강민규</h1-1>
</section>

<!-- 2. 필요성 -->
<section class="slide">
    <h2>왜 STP가 필요한가?</h2>

    <div class="necessity-content">
        <div class="redundancy-section">
            <h3>🔄 L2 스위치 이중화의 필요성</h3>
            <ul class="benefit-list">
                <li><strong>고가용성 (High Availability)</strong>: 단일 실패점 제거</li>
                <li><strong>장애 대응</strong>: 스위치 다운 시 자동 경로 전환</li>
                <li><strong>부하 분산</strong>: 트래픽을 여러 경로로 분산</li>
                <li><strong>유지보수</strong>: 서비스 중단 없이 장비 교체 가능</li>
            </ul>
        </div>

        <div class="problem-section">
            <h3>⚠️ 하지만 루프 문제 발생!</h3>
            <div class="loop-problems">
                <div class="problem-box">
                    <h4>브로드캐스트 스톰</h4>
                    <p>프레임이 무한 순환하여 대역폭 소진</p>
                </div>
                <div class="problem-box">
                    <h4>MAC 테이블 불안정</h4>
                    <p>같은 MAC이 여러 포트에서 학습</p>
                </div>
                <div class="problem-box">
                    <h4>프레임 중복</h4>
                    <p>동일한 프레임이 여러 번 전달</p>
                </div>
            </div>
        </div>
    </div>

    <div class="loop-diagram" id="stormDiagram">
        <div class="diagram-title" style="-10px;">브로드캐스트 스톰 시나리오</div>
        <svg width="100%" height="100%">
            <!-- 케이블 라인들 -->
            <line x1="200" y1="60" x2="400" y2="180" stroke="#00ff88" stroke-width="4" class="active-link" id="cable1"/>
            <line x1="400" y1="180" x2="200" y2="300" stroke="#00ff88" stroke-width="4" class="active-link" id="cable2"/>
            <line x1="200" y1="300" x2="0" y2="180" stroke="#00ff88" stroke-width="4" class="active-link" id="cable3"/>
            <line x1="0" y1="180" x2="200" y2="60" stroke="#00ff88" stroke-width="4" class="active-link" id="cable4"/>

            <!-- 화살표 마커 정의 -->
            <defs>
                <marker id="packet-arrow" markerWidth="8" markerHeight="6"
                        refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
                    <polygon points="0 0, 8 3, 0 6" fill="#ff4444" />
                </marker>

                <!-- 패킷 애니메이션을 위한 경로들 (실제 케이블과 동일한 경로) -->
                <path id="packet-path-1" d="M 200,60 L 400,180" fill="none" stroke="none"/>
                <path id="packet-path-2" d="M 400,180 L 200,300" fill="none" stroke="none"/>
                <path id="packet-path-3" d="M 200,300 L 0,180" fill="none" stroke="none"/>
                <path id="packet-path-4" d="M 0,180 L 200,60" fill="none" stroke="none"/>
            </defs>
            <!-- 패킷들 (케이블을 따라 움직임) -->
            <circle r="4" fill="#ff4444" class="packet packet-1">
                <animateMotion dur="1.5s" repeatCount="indefinite" rotate="auto">
                    <mpath href="#packet-path-1"/>
                </animateMotion>
            </circle>

            <circle r="4" fill="#ff4444" class="packet packet-2">
                <animateMotion dur="1.5s" repeatCount="indefinite" rotate="auto" begin="0.4s">
                    <mpath href="#packet-path-2"/>
                </animateMotion>
            </circle>

            <circle r="4" fill="#ff4444" class="packet packet-3">
                <animateMotion dur="1.5s" repeatCount="indefinite" rotate="auto" begin="0.8s">
                    <mpath href="#packet-path-3"/>
                </animateMotion>
            </circle>

            <circle r="4" fill="#ff4444" class="packet packet-4">
                <animateMotion dur="1.5s" repeatCount="indefinite" rotate="auto" begin="1.2s">
                    <mpath href="#packet-path-4"/>
                </animateMotion>
            </circle>

            <!-- 추가 패킷들로 더 많은 트래픽 효과 -->
            <circle r="3" fill="#ff6666" class="packet packet-5">
                <animateMotion dur="1.2s" repeatCount="indefinite" rotate="auto" begin="0.2s">
                    <mpath href="#packet-path-1"/>
                </animateMotion>
            </circle>

            <circle r="3" fill="#ff6666" class="packet packet-6">
                <animateMotion dur="1.2s" repeatCount="indefinite" rotate="auto" begin="0.6s">
                    <mpath href="#packet-path-3"/>
                </animateMotion>
            </circle>
        </svg>

        <div class="node sw-node" style="top:20px; left:160px;" id="sw1">SW1</div>
        <div class="node sw-node" style="top:140px; left:360px;" id="sw2">SW2</div>
        <div class="node sw-node" style="top:260px; left:160px;" id="sw3">SW3</div>
        <div class="node sw-node" style="top:140px; left:-40px;" id="sw4">SW4</div>

        <div class="storm-indicator">
            <div class="pulse-dot" style="top:80px; left:250px;"></div>
            <div class="pulse-dot" style="top:200px; left:180px;"></div>
            <div class="pulse-dot" style="top:180px; left:320px;"></div>
        </div>
    </div>

    <div class="solution-preview">
        <p><strong>💡 STP의 역할:</strong> 물리적으로는 이중화를 유지하되, 논리적으로는 루프를 차단하여 안정성과 가용성을 동시에 확보</p>
    </div>
</section>

<!-- 3. STP 기본 개념 -->
<section class="slide">
    <h2>STP 기본 동작 원리 및 선출 과정</h2>
    <ul>
        <li><b>Root Bridge</b>: 네트워크의 기준이 되는 스위치</li>
        <li><b>루트 포트</b>: Root Bridge로 가는 최단의 경로 포트</li>
        <li><b>지정 포트</b>: BPDU를 보내 주는 포트</li>
        <li><b>대체(차단) 포트</b>: 루프를 방지 하기 위해 차단이 된 포트</li>
    </ul>
    <div class="loop-diagram" id="stpDiagram">
        <svg width="110%" height="100%">
            <line id="link-r-s2" x1="260" y1="60" x2="740" y2="520" stroke="white" stroke-width="4"/>
            <line id="link-r-s3" x1="210" y1="60" x2="10" y2="240" stroke="white" stroke-width="4"/>
            <line id="link-s2-s3" x1="430" y1="240" x2="10" y2="240" stroke="white" stroke-width="4"/>
        </svg>
        <div class="node" id="stp-root" style="top:0px; left:185px;">
            SW1
            <div class="bridge-id" id="root-id">ID: 4096.001</div>
        </div>
        <div class="node" id="stp-sw2" style="top:200px; left:420px;">
            SW2
            <div class="bridge-id" id="sw2-id">ID: 8192.002</div>
        </div>
        <div class="node" id="stp-sw3" style="top:200px; left:-50px;">
            SW3
            <div class="bridge-id" id="sw3-id">ID: 12288.003</div>
        </div>

        <!-- 루트 포트 -->
        <div class="port-label root-port" id="rp1" style="top: 190px; left: 30px;">Root Port</div>
        <div class="port-label root-port" id="rp2" style="top: 190px; left: 360px;">Root Port</div>

        <!-- 지정 포트 -->
        <div class="port-label designated-port" id="dp1" style="top: 90px; left: 80px;">Designated Port</div>
        <div class="port-label designated-port" id="dp2" style="top: 225px; left: 300px;">Designated Port</div>
        <div class="port-label designated-port" id="dp3" style="top: 90px; left: 260px;">Designated Port</div>

        <!-- 대체 포트 -->
        <div class="port-label alternate-port" id="ap1" style="top: 225px; left: 40px;">Alternate Port</div>
    </div>
    <div class="step-indicator" id="stpStepIndicator">단계: 0/15</div>
</section>

<!-- PVST+ -->
<section class="slide">
    <h2>PVST+ (Per VLAN STP)</h2>
    <p>VLAN마다 독립적으로 BPDU 전송</p>
    <div class="loop-diagram" id="pvstDiagram" style="width: 400px; height: 300px; position: relative;">
        <svg width="100%" height="100%" style="position:absolute; top:0; left:0; z-index:0;">
            <line x1="40" y1="70" x2="410" y2="70" stroke="white" stroke-width="4"/>
            <line x1="30" y1="40" x2="30" y2="300" stroke="white" stroke-width="4"/>
            <line x1="40" y1="290" x2="400" y2="290" stroke="white" stroke-width="4"/>
            <line x1="390" y1="40" x2="390" y2="280" stroke="white" stroke-width="4"/>
        </svg>
        <div class="node" id="vlan10" style="top:20px; left:-20px; background:#FFD700; z-index:1;">VLAN10</div>
        <div class="node" id="vlan20" style="top:20px; right:-40px; background:#FF4500; z-index:1;">VLAN20</div>
        <div class="node" id="vlan30" style="bottom:-40px; left:-20px; background:#32CD32; z-index:1;">VLAN30</div>
        <div class="node" id="vlan40" style="bottom:-40px; right:-40px; background:#1E90FF; z-index:1;">VLAN40</div>
    </div>
    <div class="step-indicator" id="pvstStepIndicator">단계: 0/5</div>
</section>

<!-- RSTP -->
<section class="slide">
    <h2>RSTP (Rapid STP)</h2>
    <p>빠른 수렴 (수 초 내 복구)</p>
    <div class="loop-diagram" id="rstpDiagram" style="width:400px; height:300px; position:relative;">
        <svg width="100%" height="100%" style="position:absolute; top:0; left:0; z-index:0;">
            <!-- Root ↔ SW1 -->
            <line id="link-root-sw1" x1="200" y1="40" x2="390" y2="180" stroke="white" stroke-width="4"/>
            <!-- Root ↔ SW2 -->
            <line id="link-root-sw2" x1="240" y1="40" x2="14" y2="200" stroke="white" stroke-width="4"/>
            <!-- SW2 ↔ SW3 -->
            <line id="link-sw2-sw3" x1="60" y1="200" x2="300" y2="390" stroke="white" stroke-width="4"/>
            <!-- SW1 ↔ SW3 -->
            <line id="link-sw1-sw3" x1="400" y1="180" x2="0" y2="480" stroke="white" stroke-width="4"/>
        </svg>
        <div class="node" id="rstp-root" style="top:20px; left:180px;">Root</div>
        <div class="node" id="rstp-sw1" style="top:130px; left:360px;">SW1</div>
        <div class="node" id="rstp-sw2" style="top:130px; left:0px;">SW2</div>
        <div class="node" id="rstp-sw3" style="top:270px; left:180px;">SW3</div>
    </div>
    <div class="step-indicator" id="rstpStepIndicator">단계: 0/10</div>
</section>

<!-- MSTP -->
<section class="slide">
    <h2>MSTP (Multiple STP)</h2>
    <p>여러 VLAN을 하나의 인스턴스로 묶어 효율적 관리</p>

    <div class="loop-diagram" id="mstpDiagram" style="position:relative; width:800px; height:800px;">
        <!-- 중앙 점선 -->
        <div id="center-line" style="
            position:absolute;
            top:0;
            bottom:0;
            left:50%;
            width:2px;
            background: linear-gradient(to bottom, transparent 0%, white 10%, white 90%, transparent 100%);
            background-size: 2px 20px;
            opacity:0;
            transform:translateX(-50%);
            transition: opacity 1s;
        "></div>

        <!-- 기존 노드들 -->
        <div class="node" id="old1" style="position:absolute; top:0px; left:350px; transition: all 1s;">SW1</div>
        <div class="node" id="old2" style="position:absolute; top:150px; left:500px; transition: all 1s;">SW2</div>
        <div class="node" id="old3" style="position:absolute; top:300px; left:350px; transition: all 1s;">SW3</div>
        <div class="node" id="old4" style="position:absolute; top:150px; left:200px; transition: all 1s;">SW4</div>

        <!-- 새 노드들 -->
        <div class="node" id="new1" style="position:absolute; top:0px; left:350px; opacity:0; transition: all 1s;">SW1'</div>
        <div class="node" id="new2" style="position:absolute; top:150px; left:500px; opacity:0; transition: all 1s;">SW2'</div>
        <div class="node" id="new3" style="position:absolute; top:300px; left:350px; opacity:0; transition: all 1s;">SW3'</div>
        <div class="node" id="new4" style="position:absolute; top:150px; left:200px; opacity:0; transition: all 1s;">SW4'</div>

        <!-- VLAN 텍스트들 -->
        <div id="vlan-sw1" style="
            position: absolute;
            top: -20px;
            left: -40px;
            font-size: 16px;
            font-weight: bold;
            color: #4FC3F7;
            background: rgba(0, 0, 0, 0.8);
            padding: 5px 10px;
            border-radius: 5px;
            opacity: 0;
            transition: all 1s;
            z-index: 1;
        ">VLAN 101 ~ 200</div>

        <div id="vlan-sw2" style="
            position: absolute;
            top: 380px;
            left: -40px;
            font-size: 16px;
            font-weight: bold;
            color: #4FC3F7;
            background: rgba(0, 0, 0, 0.8);
            padding: 5px 10px;
            border-radius: 5px;
            opacity: 0;
            transition: all 1s;
            z-index: 1;
        ">VLAN 201 ~ 300</div>

        <div id="vlan-sw3" style="
            position: absolute;
            top: -20px;
            left: 460px;
            font-size: 16px;
            font-weight: bold;
            color: #4FC3F7;
            background: rgba(0, 0, 0, 0.8);
            padding: 5px 10px;
            border-radius: 5px;
            opacity: 0;
            transition: all 1s;
            z-index: 1;
        ">VLAN 101 ~ 150</div>

        <div id="vlan-sw4" style="
            position: absolute;
            top: 380px;
            left: 460px;
            font-size: 16px;
            font-weight: bold;
            color: #4FC3F7;
            background: rgba(0, 0, 0, 0.8);
            padding: 5px 10px;
            border-radius: 5px;
            opacity: 0;
            transition: all 1s;
            z-index: 1;
        ">VLAN 151 ~ 200</div>

        <!-- MST Region 텍스트 -->
        <div id="mst-region_A" style="
            position: absolute;
            top: 28%;
            left: 19%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            font-weight: bold;
            color: #FFD700;
            background: rgba(0, 0, 0, 0.9);
            padding: 15px 25px;
            border-radius: 10px;
            border: 2px solid #FFD700;
            opacity: 0;
            transition: all 1s;
            z-index: 1;
        ">MST Region A</div>

        <div id="mst-region_B" style="
            position: absolute;
            top: 28%;
            left: 81%;
            width: 135.9px;
            height: 23px;
            transform: translate(-50%, -50%);
            font-size: 20px;
            font-weight: bold;
            color: #FFD700;
            background: rgba(0, 0, 0, 0.9);
            padding: 15px 25px;
            border-radius: 10px;
            border: 2px solid #FFD700;
            opacity: 0;
            transition: all 1s;
            z-index: 1;
        ">MST Region B</div>

        <!-- SVG 라인들 -->
        <svg width="100%" height="100%" style="position:absolute; top:0; left:0; z-index:-1;">
            <line id="line1" x1="250" y1="190" x2="390" y2="50" stroke="white" stroke-width="4" style="transition: all 1s;"/>
            <line id="line2" x1="400" y1="50" x2="540" y2="190" stroke="white" stroke-width="4" style="transition: all 1s;"/>
            <line id="line3" x1="550" y1="220" x2="410" y2="360" stroke="white" stroke-width="4" style="transition: all 1s;"/>
            <line id="line4" x1="390" y1="360" x2="250" y2="220" stroke="white" stroke-width="4" style="transition: all 1s;"/>
            <line id="newLine1" x1="250" y1="190" x2="390" y2="50"  stroke="white" stroke-width="4" style="opacity:0; transition: all 1s;"/>
            <line id="newLine2" x1="400" y1="50"  x2="540" y2="190" stroke="white" stroke-width="4" style="opacity:0; transition: all 1s;"/>
            <line id="newLine3" x1="550" y1="220" x2="410" y2="360" stroke="white" stroke-width="4" style="opacity:0; transition: all 1s;"/>
            <line id="newLine4" x1="390" y1="360" x2="250" y2="220"  stroke="white" stroke-width="4" style="opacity:0; transition: all 1s;"/>
        </svg>

        <!-- 반투명 박스 화살표 -->
        <div id="arrowBox-sw1" style="
            position: absolute;
            top: -30px;
            left: -50px;
            width: 400px;
            height: 250px;
            background: rgba(255, 68, 68, 0.2);
            border-radius: 4px;
            opacity: 0;
            transition: all 1s;
        "></div>

        <div id="arrowBox-sw3" style="
            position: absolute;
            top: 200px;
            left: -50px;
            width: 400px;
            height: 250px;
            background: rgba(76, 175, 80, 0.2);
            border-radius: 4px;
            opacity: 0;
            transition: all 1s;
        "></div>

        <div id="arrowBox-sw1_1" style="
            position: absolute;
            top: -30px;
            left: 450px;
            width: 400px;
            height: 250px;
            background: rgba(121, 85, 72, 0.4);
            border-radius: 4px;
            opacity: 0;
            transition: all 1s;
        "></div>

        <div id="arrowBox-sw3_1" style="
            position: absolute;
            top: 200px;
            left: 450px;
            width: 400px;
            height: 250px;
            background: rgba(233, 30, 99, 0.2);
            border-radius: 4px;
            opacity: 0;
            transition: all 1s;
        "></div>
    </div>

    <div class="step-indicator" id="mstpStepIndicator">단계: 0/9</div>
</section>


<!-- 비교 -->
<section class="slide">
    <h2>STP 프로토콜 비교</h2>
    <table>
        <tr><th>프로토콜</th><th>수렴시간</th><th>특징</th><th>장점</th></tr>
        <tr><td>STP</td><td>30~50초</td><td>루프 방지, 느린 수렴</td><td>안정성</td></tr>
        <tr><td>PVST+</td><td>30~50초</td><td>VLAN별 STP, Cisco전용</td><td>VLAN별 최적화, 로드 밸런싱</td></tr>
        <tr><td>RSTP</td><td>0.028~1초</td><td>빠른 수렴,Edge Port지원</td><td>빠른 수렴, 표준화</td></tr>
        <tr><td>MSTP</td><td>0.028~1초</td><td>여러 VLAN 인스턴스 묶음</td><td>빠른 수렴, 효율적 로드밸런싱</td></tr>
    </table>
</section>

<!-- 결론 -->
<section class="slide">
    <h2>결론</h2>
    <p>STP는 안정적인 네트워크의 필수 요소입니다.<br>PVST+, RSTP, MSTP는 상황에 따라 선택적으로 활용!</p>
    <h3>질문 있으신가요? 😊</h3>
</section>

<script src="script.js"></script>
</body>
</html>